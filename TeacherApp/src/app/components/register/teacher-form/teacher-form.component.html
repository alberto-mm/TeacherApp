
<section class="container mt-3 border">
    <h1>Formulario de profesor</h1>
    <form [formGroup]="teacherForm" (ngSubmit)="getDataForm()">
        
        <div class="row mb-3 m-2">
            <label  class="form-label" for="name">Nombre</label>
            <input  type="text" [ngClass]="{'border-red': !checkValidControl('name')}" id="name" class="form-control " formControlName="name">
            <p class="error" *ngIf="checkControl('name', 'required')">
                El campo es obligatorio
            </p>
            <p class="error" *ngIf="checkControl('name', 'pattern')">
                Formato incorrecto. Por favor introduce solo caracteres alfabeticos. Evita introducir números y caracteres especiales.
            </p>
        </div>
        
        <div class="row mb-3 m-2">
            <label class="form-label" for="surname">Apellidos</label>
            <input  [ngClass]="{'border-red': !checkValidControl('surname')}" class="form-label" type="text" id="surname" class="form-control " formControlName="surname">
            <p class="error" *ngIf="checkControl('surname', 'required')">
                El campo es obligatorio
            </p>
            <p class="error" *ngIf="checkControl('surname', 'pattern')">
                Formato incorrecto. Por favor introduce solo caracteres alfabeticos. Evita introducir números y caracteres especiales.
            </p>
        </div>
        
        <div class="row mb-3 m-2">
            <label class="form-label" for="email">Email</label>
            <input [ngClass]="{'border-red': !checkValidControl('email')}" class="form-label" type="text" id="email" class="form-control " formControlName="email">
            <p class="error" *ngIf="checkControl('email', 'required')">
                El campo es obligatorio
            </p>
            <p class="error" *ngIf="checkControl('email', 'pattern')">
                Formato incorrecto. Por favor introduce un email con formato correcto.
            </p>
        </div>
        
        <div class="row mb-3 m-2">
            <label class="form-label" for="password">Password</label>
            <input  type="password" [ngClass]="{'border-red': !checkValidControl('password')}" id="password" class="form-control " formControlName="password">
            <p class="error" *ngIf="checkControl('password', 'required')">
                El campo es obligatorio
            </p>
            <p class="error" *ngIf="checkControl('password', 'minlength')">
                El password debe tener una longitud minima de 8 caracteres.
            </p> 
        </div>
        
        <div class="row mb-3 m-2">
            <label class="form-label" for="passwordConfirm">Confirma tu password</label>
            <input type="password" [ngClass]="{'border-red': !checkValidControl('passwordConfirm')}" id="passwordConfirm" class="form-control " formControlName="passwordConfirm">
            <p class="error" *ngIf="checkControl('passwordConfirm', 'required')">
                El campo es obligatorio
            </p>
            <p class="error" *ngIf="teacherForm.hasError('checkpassword')">
                Los campos password introducidos no coinciden
            </p>
        </div>
        
        <div class="row mb-3 m-2">
            <label class="form-label" for="phone">Teléfono</label>
            <input  type="text" [ngClass]="{'border-red': !checkValidControl('phone')}" id="phone" class="form-control " formControlName="phone">
            <p class="error" *ngIf="checkControl('phone', 'required')">
                El campo es obligatorio
            </p>
            <p class="error" *ngIf="checkControl('phone', 'minlength')">
                Telefono de contacto incorrecto.
            </p> 
            <p class="error" *ngIf="checkControl('phone', 'maxlength')">
                Telefono de contacto incorrecto.
            </p> 
            <p class="error" *ngIf="checkControl('phone', 'pattern')">
                Formato incorrecto. Por favor introduce el código numerico del pais precedido por el simbolo '+' seguido del numero de telefono.
            </p>
        </div>
        
        <div class="row mb-3 m-2">
            <label class="form-label" for="address">Direccion</label>
            <input class="form-label" type="text" id="address" class="form-control " formControlName="address">
        </div>

        <div class="row mb-3 m-2">
            <label class="form-label" for="avatar">Avatar</label>
            <input class="form-label" type="text" id="avatar" class="form-control " formControlName="avatar">
        </div>

        <div class="row mb-3 m-2">
            <label class="form-label" for="province-selector">Provincia</label>
            <select (change) = "onSelected($event)" class="form-select" name="province" id="province-selector" formControlName="province_id">
                <option default>Selecciona una provincia</option>
                <option *ngFor="let province of provinces" [value]="province?.id">{{province?.name}}</option>
            </select>
            <p class="error" *ngIf="checkControl('province_id', 'required')">
                El campo es obligatorio
            </p>
        </div>
        
        <div class="row mb-3 m-2">
            <label  class="form-label" for="city-selector">Ciudad</label>
            <select class="form-select" name="city" id="city-selector" formControlName="city_id">
                <option default>Selecciona tu ciudad de residencia</option>
                <option *ngFor="let city of citiesbyProvince" [value]="city?.id">{{city?.name}}</option>
            </select>
            <p class="error" *ngIf="checkControl('city_id', 'required')">
                El campo es obligatorio
            </p>
        </div>
        
        <div class="row mb-3 m-2">
            <label class="form-label"  for="price_hour">precio/hora</label>
            <input class="form-label" type="text" id="price_hour" class="form-control " formControlName="price_hour">
            <p class="error" *ngIf="checkControl('price_hour', 'required')">
                Este campo es obligatorio
            </p>
            <p class="error" *ngIf="checkControl('price_hour', 'pattern')">
                Formato del precio incorrecto. Por favor introduce solo caracteres numericos
            </p>
        </div>

        <div class="row mb-3 m-2">
            <label class="form-label"  for="branch">Rama</label>
            <select class="form-select" name="branch" id="branch-selector" formControlName="branch_id">
                <option default>Selecciona una rama</option>
                <option *ngFor="let branch of branches" [value]="branch?.id">{{branch?.title}}</option>
            </select>
            <p class="error" *ngIf="checkControl('branch', 'required')">
                El campo es obligatorio
            </p>
        </div>

        <div class="row mb-3 m-2">
            <label class="form-label"  for="subjects">Especialidad </label>
            <input class="form-label" type="text" id="subjects" class="form-control " formControlName="subjects">
        </div>

        <div class="row mb-3 m-2">
            <label class="form-label"  for="experience">Años dando clase: </label>
            <input class="form-label" type="number" id="experience" class="form-control " formControlName="experience">
        </div>

        <h2>Horario</h2>

        <div class = "d-flex justify-content-center">
            
            <div class="row mb-3 m-2 col-lg-5">
                <label class="form-label"  for="start_class_hour">Hora de inicio</label>
                <select class="form-select" name="start_class_hour" id="start_class_hour" formControlName="start_class_hour">
                    <option default>Selecciona una hora de inicio</option>
                    <option *ngFor="let timestamp of timeStampList" [value]="timestamp.value">{{timestamp.hour}}</option>
                </select>
                <p class="error" *ngIf="checkControl('start_class_hour', 'required')">
                    El campo es obligatorio
                </p>
                
            </div>
    
            <div class="row mb-3 m-2 col-lg-5">
                <label class="form-label"  for="end_class_hour">Hora de fin</label>
                <select class="form-select" name="end_class_hour" id="end_class_hour" formControlName="end_class_hour">
                    <option default>Selecciona una hora de fin</option>
                    <option *ngFor="let timestamp of timeStampList" [value]="timestamp.value">{{timestamp.hour}}</option>
                </select>
                <p class="error" *ngIf="checkControl('end_class_hour', 'required')">
                    El campo es obligatorio
                </p>
            </div>
            <p class="error" *ngIf="teacherForm.hasError('scheduleCheck')">
                La hora de inicio debe ser anterior a la hora de fin.
            </p>
        </div>
        


        <input type="submit" [value]="accion" class="btn btn-success btn-lg btn-block mt-3 m-2">
    </form>
</section>